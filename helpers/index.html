<html>
<body id="body" onload="init()">
	<div><h1>Drag'n'drop</h1>
		<div id="alternativesContainer" style="width: 300px;"/>
	</div>
</body>
<script>
var body = document.getElementById("body");
var alternativesContainer = document.getElementById("alternativesContainer");
var dragAlternative = 0;

var onClick = function() {
	alert("Click!");
}

var createId = function(n) {
	return "alt" + n;
}

var mousedown = function(n) {
	var e = window.event;
	e.preventDefault();
	e.stopPropagation();
	var id = createId(n);
	var floatingId = createId(0);
	var alternative = document.getElementById(id);
	var floatingAlternative = document.getElementById(floatingId);
	floatingAlternative.innerHTML = alternative.innerHTML;
	alternative.style.visibility = "hidden";
	floatingAlternative.style.visibility = "visible";
	floatingAlternative.style.left = e.clientX;
	floatingAlternative.style.top = e.clientY;
	dragAlternative = n;
}

var mouseup = function(n) {
	if (!dragAlternative) return;
	var e = window.event;
	e.preventDefault();
	e.stopPropagation();
	var id = createId(dragAlternative);
	var floatingId = createId(0);
	var alternative = document.getElementById(id);
	var floatingAlternative = document.getElementById(floatingId);
	alternative.style.visibility = "visible";
	floatingAlternative.style.visibility = "hidden";
	floatingAlternative.style.left = e.clientX;
	floatingAlternative.style.top = e.clientY;
	dragAlternative = 0;
}

var mousemove = function() {
	if (!dragAlternative) return;
	var e = window.event;
	e.preventDefault();
	e.stopPropagation();
	var floatingId = createId(0);
	var floatingAlternative = document.getElementById(floatingId);
	floatingAlternative.style.left = e.clientX;
	floatingAlternative.style.top = e.clientY;
}

var createAlternative = function(n) {
	var alternative = document.createElement("div");
	alternative.setAttribute("id", createId(n));
	alternative.setAttribute("style", "margin: 1px; background-color: lightgreen");
	alternative.setAttribute("onmousedown", "mousedown(" + n + ")");
	alternative.setAttribute("onmouseup", "mouseup(" + n + ")");
	alternative.setAttribute("onmousemove", "mousemove()");
	alternative.innerHTML = "Alternativ " + n;
	return alternative;
}

var createFloatingAlternative = function() {
	var floatingAlternative = document.createElement("div");
	floatingAlternative.setAttribute("id", createId(0));
	floatingAlternative.setAttribute("style", "margin: 1px; background-color: lightgray; position: absolute; left: 0; top: 0; visibility: hidden");
	return floatingAlternative;
}

var addAlternatives = function(n) {
	for (var i = 1; i <= n; i++) {
		var alternative = createAlternative(i);
		alternativesContainer.appendChild(alternative);
	}
	var floatingAlternative = createFloatingAlternative();
	alternativesContainer.appendChild(floatingAlternative);
	alternativesContainer.setAttribute("onmouseup", "mouseup(0)");
	alternativesContainer.setAttribute("onmousemove", "mousemove()");
	body.setAttribute("onmouseup", "mouseup(0)");
	body.setAttribute("onmousemove", "mousemove()");
}

var init = function () {
	addAlternatives(3);	
}

</script>
</html>